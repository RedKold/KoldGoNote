# 复习规划
- [x] [[05 整数线性规划]]
1. [x] 整数线性规划问题的提出 6.1
2. [x] 0-1 整数线性规划 6.4 **重点：隐枚举法**
3. [x] 指派问题 6.5 重点：**匈牙利法**

# 整数线性规划问题的提出
如果所有的变量都限制为（非负）整数，就称为纯整数线性规划 (pure integer linear programming) ，如果仅有一部分变量限制为整数，则称为混合整数线性规划 (mixed integer linear programming)。整数线性规划的特殊情形：0-1 规划，它的变量取值仅限于 0 或 1

# 分支定界解法
如果可行域有界，则想到可以穷举变量的所有可能的整数组合，组合数常常是十分巨大难以求解的。
那么我们就检查可行的整数的一部分，分支定界解法 (branch and bound method ) 就是其中的一个。

## *思想*：
设有最大化的整数规划问题 $A$，和与其对应的线性规划问题 $B$
解 $B$，如果 $B$ 的最优解不符合整数条件，那么 $B$ 的最优目标函数值必然是 $A$ 的最优目标函数值 $z^{*}$ 的上界，记这个上界为 $\overline{z}$ ; 而 $A$ 的任意可行解的目标函数值是 $z^{*}$ 的一个下界 $\underline{z}$

分支定界：将 $B$ 的可行域分成子区域，逐步减小上界 $\overline{z}$，增大 $\underline{z}$ ，最终逼近求得 $z^{*}$

有点类似于分而治之 (Divide and Conquer)
## 怎样分割？
利用整数条件。
例如最优解如果是 $(4.81,1.82)$，那就以 $x_{1}$ 以划分标准，将可行域划分为 $x_{1}\leq 4$ 和 $x_{1}\geq5$
接着去求。并标记上界 $\overline{z}$

每一分支进行，最后如果求得了纯整数解，则将它作为下界。
——优化列举：如果某个分支的最优目标函数值没有逾越下界，那么对它继续分割没有必要。可以节省步骤。

# 0-1 整数线性规划问题
是一种特殊情形：$x_{i}\in \{ 0,1 \}$
## 解法：隐枚举法
以求 $\max z=CX$ 类型为例
1. 试探方式找一个可行解，将可行解代入目标函数，得到最优目标函数值的一个 **下界**
2. 将下界条件 $CX\geq z_{0}$ 作为新的约束条件 $\star$
3. 按照 $\star,(1),(2),\dots$，顺序排好，以此检查列举，从二进制的 0000 开始到结束。
4. 如果过程中 $z$ 超过了已有 $z_{0}$，则更新 $z$，以提高效率。
5. 一般常排列 $x_{i}$ 的顺序使得目标函数中 $x_i$ 的系数递增，这样对于求 $\max z$ 的整数规划列举效率更高。如果是求 $\min$，则一般使得目标函数中 $x_{i}$ 的系数递减。


# 指派问题
背景：某单位要完成 $n$ 项任务，恰好有 $n$ 个人可承担这些任务，但是不同人的效率不同，所以产生指派某个人去完成某个人物来使得效率最大化或用时最小化的分析问题

## 原理
引入指派变量
$$
x_{ij}=\begin{cases}
1,\text{ 指派第$i$个人去完成第$j$项任务}\\
0,\text{ otherwise}
\end{cases}
$$
问题要求极小化：
$$
\begin{align}
\min z&=\sum_{i}\sum_{j}c_{ij}x_{ij} \\
&\begin{cases}
\sum_{i}x_{ij}=1 \\
\sum_{j}x_{ij}=1 \\
x_{ij}\in \{ 0,1 \}
\end{cases}
\end{align}
$$
## 匈牙利解法
### 利用性质
指派问题的最优解有这样性质：若从系数矩阵 $(c_{ij})$ 的一行（列）各元素分别减去该行（列）的最小元素，得到新矩阵 $(b_{ij})$，那么以 $(b_{ij})$ 为系数矩阵求得的最优解和利用原矩阵求得的最优解相同。
**行** row代表**人**，**列** column代表**任务**
### 步骤
1. 变换系数矩阵，各行各列都出现 0 元素
2. 进行试指派，寻找最优解
	1. 从只有一个 0 元素的行开始，给这个 0 元素加圈 $\circledcirc$; *代表这行代表的人只有一个任务可指派*。然后把该列其他 0 元素划去，记作 $\upphi$ *表示该列的任务已经指派完毕，不需要再考虑别人*
	2. 从只有一个 0 元素的列开始，加圈，记作 $\circledcirc$；然后划去其他行的 $\upphi$
	3. 反复进行，until 所有 0 元素不是被圈出，就是被划掉
	4. 若仍有没画圈的 0 元素，且同行的零元素至少有两个（表示他有两个任务选择指派）
		1. **试探**：从剩有零元素最少的行（列）开始，比较这行 0 元素所在列中 0 元素的数目，选择 0 元素较**少**的那列的零元素加圈 *选择性多的礼让选择性少的*
		2. 反复进行，until 所有 0 元素不是被圈出，就是被划掉
	5. 若 $\circledcirc$ 的数目 m 和矩阵的阶数 n 相同，那么指派问题最优解已经得到。否则转入下一步
3. 解题没有完成，m 和 n 不同，则作最少的直线覆盖所有 0 元素（解读以下策略：*要求元素互相独立，则要分开对待 $\phi$ 和 $\circledcirc$ 所以用打对号标记列，不打对号标记行。为了画最少的直线，已经打对号的列，直线会包含圆圈，所以该行会浪费，打对勾标记不要*）
	1. 对没有 $\circledcirc$ 的行打 $\checkmark$ 号
	2. 对已经打 $\checkmark$ 的行所有含 $\phi$ 的列打 $\checkmark$
	3. 再对所有打有 $\checkmark$ 列中含 $\circledcirc$ 的行打 $\checkmark$
	4. 重复以上步骤直到做不出新的 $\checkmark$
	5. 对没有 $\checkmark$ 的行划**横线**，对有 $\checkmark$ 的划纵线，就得到了覆盖所有 0 元素的最少直线数 $l$。
 如果 $l<n$ ，说明必须变换系数矩阵，转入**第 5 步**。否则转到**第 3 步**试探不同的指派
4. 对矩阵变换的目的是 **增加相互独立的 0**元素：为此我们这样做：
	1. 在没有被直线覆盖的区域，找到最小元素 $a$
	2. 在**打 $\checkmark$ 的行都减去这最小元素，在打 $\checkmark$ 的列都加上这个元素**。保证原来 0 元素不变。
	3. 得到新矩阵。若新矩阵有 $n$ 个独立的 0 元素则已经有解
	4. 否则，返回第 3 步

